<!DOCTYPE html>
<html lang="zh-CH">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    function random(min, max) {
      max += 1
      return Math.floor(Math.random() * (max - min) ) + min
    } 
  </script>
  <style>
    body {
      font-size: 0px;
    }
    .text {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: rgb(156, 255, 243);
    }
    .lei {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: rgb(0, 0, 0);
    }
    .wenhao {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: rgb(255, 255, 255);
    }
    .f {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: rgb(161, 160, 154);
    }
    .none {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: rgb(196, 194, 184);
    }
    .one {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: red;
    }
    .two {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: orange;
    }
    .three {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: yellow;
    }
    .four {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: green;
    }
    .five {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: aqua;
    }
    .six {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: blue;
    }
    .seven {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: purple;
    }
    .eight {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: pink;
    }
    .boom {
      display: inline-block;
      width: 25px;
      height: 25px;
      background-color: black;
    }
  </style>










  <script>
    var 剩余雷数 = 100

    
    function change_class(self, hou) {
      document.getElementById(self.id.toString()).className=hou
    }
    function get_id_num(self) {
      return Number(self.id.toString().slice(1))
    }
    function get_id_O_or_X(self) {
      return self.id.toString()[0]
    }
    function get_class(self) {
      return document.getElementById(self.id.toString()).className
    }



    function turn_span_end_return(self) {
      if (get_id_O_or_X(self)=='X') {
        return 1;
      }
      var lei_shu = 0
      try {
        if (get_id_num(self)>25 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-25).toString()))=='X') {  // 上
          var up_turn =function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var up_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)-25).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+25).toString()))=='X') {  // 下
          
          var down_turn = function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var down_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)+25).toString()))
          }
      }
      try {
        if ((get_id_num(self)-1)%25!=0 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-1).toString()))=='X') {  // 左
        
        var left_turn = function() {}
        lei_shu += 1
      }
      }
      catch(error) {
        var left_turn = function() {
          turn_span(document.getElementById('O'+(get_id_num(self)-1).toString()))
        }
      }
      try {
        if (get_id_num(self)%25!=0 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+1).toString()))=='X') {  // 右
          
          var right_turn = function() {}
        lei_shu += 1
      }
      }
      catch(error) {
        var right_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)+1).toString()))
          }
      }
      try {
        if (get_id_num(self)>25 && (get_id_num(self)-1)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-26).toString()))=='X') {  // 上左
          
          var upleft_turn = function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var upleft_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)-26).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && (get_id_num(self)-1)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+24).toString()))=='X') {  // 下左
          
          var downleft_turn = function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var downleft_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)+24).toString()))
          }
      }
      try {
        if (get_id_num(self)>25 && get_id_num(self)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-24).toString()))=='X') {  // 上右
          
          var upright_turn = function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var upright_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)-24).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && get_id_num(self)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+26).toString()))=='X') {  // 下右
          
          var downright_turn = function() {}
          lei_shu += 1
        }
      }
      catch(error) {
        var downright_turn = function() {
            turn_span(document.getElementById('O'+(get_id_num(self)+26).toString()))
          }
      }
      if (lei_shu == 0) {
        change_class(self, 'none')
      // up_turn()
      // down_turn()
      // left_turn()
      // right_turn() 
      // upleft_turn()
      // upright_turn()
      // downleft_turn()
      // downright_turn()
      return 1;
      }
      else {
        
      }
      switch(lei_shu) {
        case 1:
          change_class(self, 'one')
          break
        case 2:
          change_class(self, 'two')
          break
        case 3:
          change_class(self, 'three')
          break
        case 4:
          change_class(self, 'four')
          break
        case 5:
          change_class(self, 'five')
          break
        case 6:
          change_class(self, 'six')
          break
        case 7:
          change_class(self, 'seven')
          break
        case 8:
          change_class(self, 'eight')
          break
      }
      // up_turn()
      // down_turn()
      // left_turn()
      // right_turn()
      // upleft_turn()
      // upright_turn()
      // downleft_turn()
      // downright_turn()
      return 1;
    }






    function turn_span(self) {


      if (get_id_O_or_X(self)=='X') {
        // change_class(self, 'boom')
        alert('你踩雷了!哈哈哈~重开吗?')
        location.reload()
        return 
      }
      var lei_shu = 0
      try {
        if (get_id_num(self)>25 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-25).toString()))=='X') {  // 上
          var up_turn =function() {
            return 1
          }
          lei_shu += 1
        }
      }
      catch(error) {
        var up_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)-25).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+25).toString()))=='X') {  // 下
          
          var down_turn = function() {return 1}
          lei_shu += 1
        }
      }
      catch(error) {
        var down_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)+25).toString()))
          }
      }
      try {
        if ((get_id_num(self)-1)%25!=0 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-1).toString()))=='X') {  // 左
        
        var left_turn = function() {return 1}
        lei_shu += 1
      }
      }
      catch(error) {
        var left_turn = function() {
          return turn_span_end_return(document.getElementById('O'+(get_id_num(self)-1).toString()))
        }
      }
      try {
        if (get_id_num(self)%25!=0 && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+1).toString()))=='X') {  // 右
          
          var right_turn = function() {return 1}
        lei_shu += 1
      }
      }
      catch(error) {
        var right_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)+1).toString()))
          }
      }
      try {
        if (get_id_num(self)>25 && (get_id_num(self)-1)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-26).toString()))=='X') {  // 上左
          
          var upleft_turn = function() {return 1}
          lei_shu += 1
        }
      }
      catch(error) {
        var upleft_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)-26).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && (get_id_num(self)-1)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+24).toString()))=='X') {  // 下左
          
          var downleft_turn = function() {return 1}
          lei_shu += 1
        }
      }
      catch(error) {
        var downleft_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)+24).toString()))
          }
      }
      try {
        if (get_id_num(self)>25 && get_id_num(self)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)-24).toString()))=='X') {  // 上右
          
          var upright_turn = function() {return 1}
          lei_shu += 1
        }
      }
      catch(error) {
        var upright_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)-24).toString()))
          }
      }
      try {
        if (get_id_num(self)<601 && get_id_num(self)%25!=0 
        && get_id_O_or_X(document.getElementById('X'+(get_id_num(self)+26).toString()))=='X') {  // 下右
          
          var downright_turn = function() {return 1}
          lei_shu += 1
        }
      }
      catch(error) {
        var downright_turn = function() {
            return turn_span_end_return(document.getElementById('O'+(get_id_num(self)+26).toString()))
          }
      }
      if (lei_shu == 0) {
        change_class(self, 'none')
      // console.log(0)
      try {while (up_turn() === 0) {}} catch(error) {}
      // console.log(1)
      try {while (down_turn() === 0) {}} catch(error) {}
      // console.log(2)
      try {while (left_turn() === 0) {}} catch(error) {}
      try {while (right_turn() === 0) {}} catch(error) {}
      try {while (upleft_turn() === 0) {}} catch(error) {}
      try {while (upright_turn() === 0) {}} catch(error) {}
      try {while (downleft_turn() === 0) {}} catch(error) {}
      try {while (downright_turn() === 0) {}} catch(error) {}
      
      
      
      
      
      
      
       
      
      
      
      
      return
      }
      else {
        
      }
      switch(lei_shu) {
        case 1:
          change_class(self, 'one')
          break
        case 2:
          change_class(self, 'two')
          break
        case 3:
          change_class(self, 'three')
          break
        case 4:
          change_class(self, 'four')
          break
        case 5:
          change_class(self, 'five')
          break
        case 6:
          change_class(self, 'six')
          break
        case 7:
          change_class(self, 'seven')
          break
        case 8:
          change_class(self, 'eight')
          break
      }
      // up_turn()
      // down_turn()
      // left_turn()
      // right_turn()
      // upleft_turn()
      // upright_turn()
      // downleft_turn()
      // downright_turn()
      return
    }
      

  </script>










  <script>
    function 鼠标检测() {
      var  el = window.document.body; //声明一个变量，默认值为body
      window.document.body.onmouseover =  function (event) {
        el = event.target; //鼠标每经过一个元素，就把该元素赋值给变量el
      }
      window.onload = function(){
           //去掉默认的contextmenu事件，否则会和右键事件同时出现。
           document.oncontextmenu = function(e){
               e.preventDefault();
           };
           el.onmousedown = function(e){
               if(e.button ==0 && el.className=='f') {  // left
                  turn_span(el)
               }else if(e.button ==1 && el.className=='f') {  // center
                  el.className='wenhao'
               }
               else if(e.button ==1 && el.className=='wenhao') { 
                el.className='f'
              }
              else if(e.button ==1 && el.className=='lei') { 
                el.className='wenhao'
                剩余雷数 += 1
                console.log(`剩余雷数:${剩余雷数}`)
              }
               else if(e.button ==2 && el.className=='f') {  // right
                  el.className='lei'
                  剩余雷数 -= 1
                  console.log(`剩余雷数:${剩余雷数}`)
               }
               else if(e.button ==2 && el.className=='wenhao') { 
                  el.className='lei'
                  剩余雷数 -= 1
                  console.log(`剩余雷数:${剩余雷数}`)
               }
               else if(e.button ==2 && el.className=='lei') {  
                  el.className='f'
                  剩余雷数 += 1
                  console.log(`剩余雷数:${剩余雷数}`)
               }
           }
      }

    }
    var hua_bu =
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'+
'fffffffffffffffffffffffff'
  </script>
  <script>
    var 未部署雷数量 = 100;
    for (var i=1;i<=25;i++) {  // 1~25控制行
      document.write('<div>')
      for (var j=(i*25)-25;j<=(i*25)-1;j++) {
        if (random(1,6) != 1) {  // 空
          // document.write(`<span class="${hua_bu[j]}" id="O${(j+1).toString()}" value="1" onclick="main(this)"></span>`)
          document.write(`<span class="f" id="O${(j+1).toString()}" value="1"></span>`)
        }
        else if (未部署雷数量 != 0) {  // 雷
          // document.write(`<span class="${hua_bu[j]}" id="X${(j+1).toString()}" value="1" onclick="main(this)"></span>`)
          document.write(`<span class="f" id="X${(j+1).toString()}" value="1"></span>`)
          未部署雷数量 -= 1
        }
        else {
          // document.write(`<span class="${hua_bu[j]}" id="O${(j+1).toString()}" value="1" onclick="main(this)"></span>`)
          document.write(`<span class="f" id="O${(j+1).toString()}" value="1"></span>`)
        }
      }
      document.write('</div>')
    }
    if (未部署雷数量 != 0) {
      location.reload()
    }
    鼠标检测()
  </script>
</head>
<body>
  <button onclick="alert(`剩余雷数:${剩余雷数}`)">查看剩余雷数</button>
  <button onclick="
  if (剩余雷数 == 0) {
    alert('你成功了!要再来一把吗?')
    location.reload()
  }
  else {
    alert('你没有完成,继续完成本局游戏吧~')
  }
  ">提交成绩</button>
  <button onclick="
  while (true) {
    var ls_var = prompt('1.操作说明\n2.方块类型说明\n3.规则说明\n4.关于此游戏\n请输入数字:')
    if (ls_var === null) {
      break
    }
    else {
      ls_var = Number(ls_var)
      switch (ls_var) {
        case 1:
          alert(
            '点击鼠标左键:打开方块,对本方块进行查看\n'+
            '点击鼠标滚轮键:对方块标记为?\n'+
            '点击鼠标右键:对方块标记为雷\n'+
            '    以上有问题请查看2.方块类型说明与3.规则说明')
          break
        case 2:
          alert(
            '红,橙,黄,绿,青,蓝,紫,粉:对应周围一圈方块内有 1,2,3,4,5,6,7,8个雷\n'+
            '深灰:未打开的方块\n'+
            '浅灰:周围没有雷\n'+
            '黑:玩家标记,此方块下为雷\n'+
            '白:玩家标记,此方块下可能为雷\n'+
            '    以上有问题请查看1.操作说明与3.规则说明')
          break
        case 3:
          alert(
            '点击开启后\n  如果为雷:失败\n  如果为周围含雷方块:打开此方块\n  如果为空:打开周围一圈与本格的方块\n'+
            '标记为雷\n  正确标记雷直到剩余雷数为0后提交成绩即可胜利\n  标记为雷之后不可开启本方块\n  再次标记为雷可已回到未打开状态\n'+
            '标记为可能是雷\n  标记后不可开启本方块\n 再次标记为可能是雷可已回到未打开状态\n'+
            '查看剩余的雷的方法:点击剩余雷数按钮\n'+
            '提交成绩的方法:点击提交成绩按钮\n'+
            '    以上有问题请查看1.操作说明与2.方块类型说明'
          )
          break
        case 4:
          alert('制作:陈同学\n本网页在github开源,请遵守开源协议')
          break
        default:
          alert('请输入在范围内的数字编号或者按取消键退出')
      }
    }
    
  }
  
  ">游玩说明</button>
</body>
</html>